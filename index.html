<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roleta do Felipe</title>

<style>

body{
    margin:0;
    font-family: Arial, sans-serif;
    background: radial-gradient(circle, #0f2027, #203a43, #2c5364);
    color:white;
    text-align:center;
}

h1{
    font-size:32px;
    text-shadow:0 0 15px cyan;
}

.container{
    padding:15px;
}

textarea{
    width:90%;
    max-width:300px;
    height:120px;
    font-size:16px;
    border-radius:10px;
    padding:10px;
    border:none;
}

button{
    margin:5px;
    padding:12px 20px;
    font-size:16px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    background:cyan;
    font-weight:bold;
}

canvas{
    width:90%;
    max-width:350px;
    background:black;
    border-radius:50%;
    box-shadow:0 0 20px cyan;
    margin-top:15px;
}

#seta{
    font-size:40px;
}

</style>

</head>
<body>

<div class="container">

<h1>üéØ Roleta do Felipe</h1>

<textarea id="nomes" placeholder="Digite um nome por linha"></textarea>

<br>

<button onclick="criarRoleta()">Criar</button>
<button onclick="girar()">Girar</button>
<button onclick="resetar()">Reset</button>

<br>

<div id="seta">‚¨á</div>

<canvas id="canvas" width="400" height="400"></canvas>

<h3>üèÜ Vencedores:</h3>
<div id="vencedores"></div>

</div>

<audio id="som">
<source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3">
</audio>

<script>

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let nomes = [];
let original = [];
let girando=false;

const cores=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ff8800"];

function criarRoleta(){

nomes=document.getElementById("nomes").value.split("\n").filter(n=>n);

original=[...nomes];

desenhar();

}

function desenhar(){

if(nomes.length==0) return;

let angulo=2*Math.PI/nomes.length;

ctx.clearRect(0,0,400,400);

for(let i=0;i<nomes.length;i++){

ctx.beginPath();
ctx.moveTo(200,200);
ctx.arc(200,200,200,i*angulo,(i+1)*angulo);

ctx.fillStyle=cores[i%cores.length];
ctx.fill();

ctx.save();

ctx.translate(200,200);
ctx.rotate(i*angulo+angulo/2);

ctx.fillStyle="white";
ctx.font="bold 16px Arial";
ctx.fillText(nomes[i],80,5);

ctx.restore();

}

}

function girar(){

if(girando || nomes.length==0) return;

girando=true;

let sorteio=Math.floor(Math.random()*nomes.length);

let grau=360*5+(360/nomes.length)*(nomes.length-sorteio);

canvas.style.transition="transform 4s ease-out";
canvas.style.transform="rotate("+grau+"deg)";

setTimeout(()=>{

let vencedor=nomes[sorteio];

document.getElementById("som").play();

document.getElementById("vencedores").innerHTML+=vencedor+"<br>";

nomes.splice(sorteio,1);

desenhar();

canvas.style.transition="none";
canvas.style.transform="rotate(0deg)";

girando=false;

},4000);

}

function resetar(){

nomes=[...original];

document.getElementById("vencedores").innerHTML="";

desenhar();

}

</script>

</body>
</html>
