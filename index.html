<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roleta Correta</title>

<style>

body{
background:#0f2027;
color:white;
text-align:center;
font-family:Arial;
}

#container{
position:relative;
display:inline-block;
}

#seta{
position:absolute;
top:-10px;
left:50%;
transform:translateX(-50%);
font-size:40px;
z-index:10;
}

canvas{
background:black;
border-radius:50%;
}

button{
padding:10px;
margin:5px;
font-size:16px;
}

textarea{
width:300px;
height:120px;
}

</style>
</head>
<body>

<h1>üéØ Roleta</h1>

<textarea id="nomes"></textarea><br>

<button onclick="salvar()">Salvar</button>
<button onclick="girar()">Girar</button>

<div id="container">

<div id="seta">‚¨á</div>

<canvas id="canvas" width="400" height="400"></canvas>

</div>

<h2 id="resultado"></h2>

<script>

const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let nomes=[];
let rotacao=0;
let girando=false;

const cores=["red","blue","green","yellow","purple","orange","cyan"];

function salvar(){

nomes=document.getElementById("nomes").value
.split("\n")
.filter(n=>n.trim()!="");

desenhar();

}

function desenhar(){

ctx.clearRect(0,0,400,400);

let angulo=360/nomes.length;

for(let i=0;i<nomes.length;i++){

let inicio=(angulo*i-90)*(Math.PI/180);
let fim=(angulo*(i+1)-90)*(Math.PI/180);

ctx.beginPath();

ctx.moveTo(200,200);

ctx.arc(200,200,200,inicio,fim);

ctx.fillStyle=cores[i%cores.length];

ctx.fill();

ctx.save();

ctx.translate(200,200);

ctx.rotate((inicio+fim)/2);

ctx.fillStyle="white";

ctx.fillText(nomes[i],100,0);

ctx.restore();

}

}

function girar(){

if(girando || nomes.length==0)return;

girando=true;

// rota√ß√£o aleat√≥ria
let giro=Math.random()*360+1440;

rotacao+=giro;

canvas.style.transition="4s ease-out";

canvas.style.transform=`rotate(${rotacao}deg)`;

setTimeout(()=>{

// normaliza entre 0 e 360
let anguloFinal=rotacao%360;

// calcula posi√ß√£o da seta (topo)
let anguloSeta=(360-anguloFinal+270)%360;

let tamanhoSetor=360/nomes.length;

let indice=Math.floor(anguloSeta/tamanhoSetor);

let vencedor=nomes[indice];

document.getElementById("resultado").innerText=
"üèÜ "+vencedor;

// remove corretamente
nomes.splice(indice,1);

desenhar();

girando=false;

},4000);

}

</script>

</body>
</html>
